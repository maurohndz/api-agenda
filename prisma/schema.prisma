generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["main", "security"]
}

model users {
  id          String        @id(map: "pk_user") @default(dbgenerated("uuid_generate_v1()")) @db.Uuid
  code        String        @db.VarChar(10)
  names       String        @db.VarChar(256)
  last_name   String        @db.VarChar(256)
  username    String        @db.VarChar(100)
  email       String        @unique(map: "uq_user_email") @db.VarChar(256)
  phone       String?       @db.VarChar(100)
  address     String?       @db.VarChar(256)
  avatar      String?       @db.VarChar(256)
  status      Boolean       @default(true)
  credentials credentials[]

  @@schema("main")
}

model credentials {
  id                 String  @id(map: "pk_credential") @default(dbgenerated("uuid_generate_v1()")) @db.Uuid
  user_id            String  @db.Uuid
  password           String? @db.VarChar(256)
  temporary_password String? @db.VarChar(256)
  users              users   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_credentials_user")

  @@schema("security")
}
